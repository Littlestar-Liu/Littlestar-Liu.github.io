const A=(a,b,c,d,f)=>{const aa=document.querySelectorAll('.slide');const bb=document.querySelector('#stepInfo');const cc=document.querySelector('#titleInfo');const dd=document.querySelector('#next');dd.style.display='none';let ee=0;let i,j,t=0;for(i=0;i<aa.length;i++){t=aa[i].children?aa[i].children.length:0;ee+=t/2;for(j=0;j<t;j++)if(t>0)aa[i].children[j].style.display='none'}aa[0].style.zIndex='2';bb.textContent='0 / '+ee;bb.style.display='none';let ff=0;let gg=0;let hh=0;let ii;let jj;let kk=1;const A1=()=>{if(kk){for(let item of aa){item.style.display='flex'}kk=0}hh++;bb.textContent=hh+' / '+ee;ll.stop();ll.play('f'+hh);switch(hh){case 1:bb.style.display='flex';dd.textContent='下一步';ii=aa[0].children;jj=ii?ii.length:0;break;case ee:dd.textContent='演示结束 / 返回';break;case ee+1:if(ii){ii[jj-2].style.display='none';for(i=1;i<jj;i+=2)ii[i].style.display='none'}ff=0;gg=0;hh=0;aa[aa.length-2].style.zIndex='0';aa[aa.length-1].style.zIndex='0';aa[0].style.zIndex='2';bb.style.display='none';dd.textContent='开始演示';return}for(i=0;i<b.length;i++){if(hh===b[i]){aa[i].classList.add('up'+i);break}}for(i=0;i<c.length;i++){if(hh===c[i]){aa[i].classList.remove('up'+i);break}}if(gg<jj){ii[gg].style.display='flex';ii[gg+1].style.display='flex';if(gg>0){ii[gg-2].style.display='none'}gg+=2;return}if(gg===jj){gg=0;if(ii){ii[jj-2].style.display='none';for(i=1;i<jj;i+=2)ii[i].style.display='none'}if(ff<aa.length-1){ii=aa[ff+1].children;jj=ii?ii.length:0;if(ii){ii[0].style.display='flex';ii[1].style.display='flex';gg=2}}t=(ff-1+aa.length)%aa.length;aa[t].style.zIndex='0';aa[ff].classList.remove('star');aa[ff].style.zIndex='1';ff=(ff+1)%aa.length;aa[ff].style.zIndex='2';aa[ff].classList.add('star')}};const ll=new Howl({src:d,sprite:f,onload:function(){dd.addEventListener('click',A1);document.addEventListener('keydown',(e)=>{if(e.keyCode===0x20){A1();e.preventDefault()}});dd.style.display='flex'}});for(let i=0;i<a.length;i++){aa[i].style.backgroundImage='url('+a[i].src+')'}aa[0].style.display='flex'};const B=()=>{const ctx=canvas.getContext('2d');canvas.height=window.innerHeight;canvas.width=window.innerHeight*0.46;let x1=canvas.width/10;let y1=canvas.height/2-10;let x2=canvas.width*0.9;let y2=canvas.height/2+10;ctx.strokeStyle="#333646";ctx.lineWidth=2;ctx.fillStyle="#F5A343";ctx.moveTo(x1,y1);ctx.lineTo(x2,y1);ctx.lineTo(x2,y2);ctx.lineTo(x1,y2);ctx.lineTo(x1,y1);ctx.stroke()};const C=(a,b,c,d,f)=>{A(a,b,c,d,f);loading.style.display='none'};async function D(url){try{const mm=new Image();mm.src=url;await new Promise((resolve,reject)=>{mm.onload=resolve;mm.onerror=()=>reject(new Error(`error:${url}`))});return mm}catch(error){console.error(error.message);return null}};async function X(g,b,c,d,f){const nn=2;let oo=0;const pp=g.length;const qq=[];B();for(let i=0;i<pp;i+=nn){const batchUrls=g.slice(i,i+nn);const tt=batchUrls.map(url=>D(url).then(mm=>{oo++;E(oo,pp);return mm}));const rr=await Promise.all(tt);qq.push(...rr.filter(mm=>mm!==null))}C(qq,b,c,d,f)};function E(ss,pp){let x1=canvas.width/10;let y1=canvas.height/2-10;let ctx=canvas.getContext('2d');ctx.fillRect(x1+2,y1+2,(canvas.width*0.8-4)/pp*ss,16)}